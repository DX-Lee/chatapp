(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0108":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mine-wrapper"},[a("nav-head",{ref:"top",staticClass:"top",attrs:{title:t.title}}),a("cube-scroll",{ref:"scroll",attrs:{data:t.postList,options:t.options,scrollEvents:t.scrollEvents},on:{scroll:t.onScroll,"pulling-down":t.onPullingDown,"pulling-up":t.onPullingUp},scopedSlots:t._u([{key:"pulldown",fn:function(e){return[e.pullDownRefresh?a("div",{staticClass:"cube-pulldown-wrapper",style:t.pullDownStyle},[a("div",{staticClass:"pulldown-content"},[e.beforePullDown?a("span",{staticClass:"load"},[t._v("下拉刷新")]):[e.isPullingDown?a("span",[t._v("正在刷新")]):a("span",[t._v("刷新成功")])]],2)]):t._e()]}},{key:"pullup",fn:function(e){return[a("div",{staticClass:"cube-pullup-wrapper"},[e.isPullUpLoad?a("cube-loading"):a("span",[t._v("到底啦")])],1)]}}])},[a("div",{staticClass:"mine-content"},[a("div",{staticClass:"backgroundPic"},[a("div",{staticClass:"pic"},[a("avatar",{attrs:{imgurl:t.user.avatar}})],1)]),a("div",{staticClass:"option-list"},[a("div",{staticClass:"option",on:{click:t.onRoutePublishPage}},[a("i",{staticClass:"iconfont icon-message"}),a("p",[t._v("说说")])])]),t.postList.length?a("div",{staticClass:"list"},[a("ul",t._l(t.postList,(function(e){return a("li",{key:e._id},[a("post-item",{attrs:{postData:e},on:{imgSelect:t.handleImgSelect}}),a("div",{staticClass:"separator"})],1)})),0)]):a("div",{staticClass:"no-content"},[t._v("这里空空如也")])])]),a("router-view")],1)},n=[],i=(a("96cf"),a("1da1")),r=a("5530"),c=a("2f62"),o=a("7aff"),l=a("6cc5"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post-item"},[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[a("avatar",{attrs:{imgurl:t.postData.avatar}})],1),a("div",{staticClass:"right"},[a("div",{staticClass:"name"},[t._v(t._s(t.postData.nickname))]),a("div",{staticClass:"time"},[t._v(" "+t._s(t.postData.time)+" ")])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"text-wrapper"},[t._v(" "+t._s(t.postData.content)+" ")]),t.postData.picList.length?a("div",{staticClass:"img-wrapper"},t._l(t.postData.picList,(function(e,s){return a("div",{key:s,staticClass:"img-box",on:{click:function(e){return t.selectPic(s)}}},[a("img",{attrs:{src:e.url,alt:""}})])})),0):t._e()]),a("div",{staticClass:"operator"},[a("div",{staticClass:"like"},[t.postData.isLike?a("div",{on:{click:t.cancelLike}},[a("svg-icon",{attrs:{"icon-class":"dianzan-active",size:"20"}})],1):a("div",{on:{click:t.addLike}},[a("svg-icon",{attrs:{"icon-class":"dianzan",size:"20"}})],1)]),a("div",{staticClass:"comment-btn",on:{click:t.onComment}},[a("svg-icon",{attrs:{"icon-class":"message",size:"20"}})],1)]),t.postData.likeList.length?a("div",{staticClass:"like-list"},[a("svg-icon",{attrs:{"icon-class":"dianzan",size:"20"}}),t._l(t.postData.likeList,(function(e,s){return a("span",{key:s,staticClass:"like-nickname"},[t._v(" "+t._s(e.user.nickname)+" ")])}))],2):t._e(),this.postData.comments.length?a("div",{staticClass:"comment-list"},t._l(t.postData.comments,(function(e,s){return a("div",{key:s,staticClass:"comment-item"},[a("span",{staticClass:"nickname"},[t._v(t._s(e.user.nickname))]),t._v(" : "+t._s(e.content)+" ")])})),0):t._e(),a("div",{staticClass:"comment-input"},[a("input",{ref:"inputbox",staticClass:"input-box",attrs:{type:"text"}}),a("div",{staticClass:"send-btn",on:{click:t.send}},[t._v("评论")])])])},p=[],d=(a("c740"),a("d81d"),a("a434"),a("c40d")),v={props:{postData:{type:Object,default:function(){}}},components:{Avatar:l["a"]},computed:Object(r["a"])({},Object(c["b"])(["user"])),methods:{onComment:function(){this.$refs.inputbox.focus()},addLike:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].post("post/addlike",{postId:t.postData.id});case 2:a=e.sent,a&&200===a.code?(t.postData.isLike=!0,t.postData.likeList.push({post:t.postData.id,user:t.user})):t.$createToast({type:"warn",txt:"操作失败",time:1e3}).show();case 4:case"end":return e.stop()}}),e)})))()},cancelLike:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].post("post/cancelLike",{postId:t.postData.id});case 2:a=e.sent,a&&200===a.code?(t.postData.isLike=!1,s=t.postData.likeList.findIndex((function(e){return e.user._id===t.user._id})),t.postData.likeList.splice(s,1)):t.$createToast({type:"warn",txt:"操作失败",time:1e3}).show();case 4:case"end":return e.stop()}}),e)})))()},send:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$refs.inputbox.value,!a){e.next=8;break}return e.next=4,d["a"].post("post/addcomment",{postId:t.postData.id,content:a});case 4:s=e.sent,s&&200===s.code?t.postData.comments.push({content:s.result.content,user:t.user}):t.$createToast({type:"warn",txt:"操作失败",time:1e3}).show(),t.$refs.inputbox.value="",t.$refs.inputbox.blur();case 8:case"end":return e.stop()}}),e)})))()},selectPic:function(t){var e=this.postData.picList.map((function(t){return t.url}));this.$emit("imgSelect",e,t)}}},f=v,h=(a("da32"),a("2877")),m=Object(h["a"])(f,u,p,!1,null,"46b7c150",null),g=m.exports,w={data:function(){return{title:"我的",pullDownStyle:"",options:{probeType:3,pullDownRefresh:{threshold:60,stop:40},pullUpLoad:{more:"加载更多",noMore:"到底啦"}},scrollEvents:["scroll"],initialIndex:0,pageStart:0,pageSize:5,hasMore:!0}},computed:Object(r["a"])({},Object(c["b"])(["user","postList"])),components:{NavHead:o["a"],Avatar:l["a"],PostItem:g},watch:{$route:"refresh"},methods:{refresh:function(){this.$route.params.ispublish&&(this.pageStart=0,this.fetchData())},initPostData:function(){this.fetchData()},fetchData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("queryPostList",{pageStart:t.pageStart,pageSize:t.pageSize});case 2:a=e.sent,a&&200===a.code?(s=a.result,0===s.length&&(t.hasMore=!1)):t.$createToast({type:"warn",txt:"刷新失败",time:1e3}).show();case 4:case"end":return e.stop()}}),e)})))()},onRoutePublishPage:function(){this.$router.push({path:"/post/publish"})},onScroll:function(t){var e=Math.min(-t.y/200,1);this.$refs.top.$el.style.backgroundColor="rgba(247,247,247,".concat(e,")"),t.y>0&&(this.pullDownStyle="top: ".concat(t.y,"px"))},handleImgSelect:function(t,e){var a=this;this.initialIndex=e,this.$createImagePreview({$props:{imgs:t,initialIndex:"initialIndex",loop:!1},$events:{change:function(t){a.initialIndex=t}}}).show()},onPullingDown:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.hasMore=!0,t.pageStart=0,t.fetchData();case 3:case"end":return e.stop()}}),e)})))()},onPullingUp:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.hasMore){e.next=5;break}return e.next=3,t.$store.dispatch("queryPostList",{pageStart:t.pageStart+1,pageSize:t.pageSize});case 3:a=e.sent,a&&200===a.code&&(s=a.result,0===s.length?t.hasMore=!1:t.pageStart=t.pageStart+1);case 5:t.$refs.scroll.forceUpdate(!0);case 6:case"end":return e.stop()}}),e)})))()}},created:function(){this.initPostData()}},k=w,b=(a("adab"),Object(h["a"])(k,s,n,!1,null,"11e845c4",null));e["default"]=b.exports},2711:function(t,e,a){"use strict";var s=a("575c"),n=a.n(s);n.a},"4da6":function(t,e,a){},"575c":function(t,e,a){},"6cc5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"avatar"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgurl,expression:"imgurl"}],attrs:{alt:""}})])},n=[],i={props:{imgurl:{type:String,default:""}}},r=i,c=(a("2711"),a("2877")),o=Object(c["a"])(r,s,n,!1,null,"28a6aad4",null);e["a"]=o.exports},"7aff":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head-wrapper"},[a("div",{staticClass:"head-left",on:{click:t.leftClick}},[t._t("left")],2),a("div",{staticClass:"title"},[t._t("default",[t._v(t._s(t.title))])],2),a("div",{staticClass:"head-right",on:{click:t.rightClick}},[t._t("right")],2)])},n=[],i={props:{title:{type:String,default:""}},methods:{leftClick:function(){this.$emit("leftClick")},rightClick:function(){this.$emit("rightClick")}}},r=i,c=(a("b019"),a("2877")),o=Object(c["a"])(r,s,n,!1,null,"595ca198",null);e["a"]=o.exports},adab:function(t,e,a){"use strict";var s=a("f115"),n=a.n(s);n.a},b019:function(t,e,a){"use strict";var s=a("b8d1"),n=a.n(s);n.a},b8d1:function(t,e,a){},da32:function(t,e,a){"use strict";var s=a("4da6"),n=a.n(s);n.a},f115:function(t,e,a){}}]);
//# sourceMappingURL=about.fccdb235.js.map