(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f5549a8"],{4545:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-signature"},[n("nav-head",{attrs:{title:t.title},on:{leftClick:t.back,rightClick:t.publish},scopedSlots:t._u([{key:"left",fn:function(){return[n("i",{staticClass:"iconfont icon-arrow-left",staticStyle:{"font-size":"24px"}})]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"publish-btn"},[t._v("发布")])]},proxy:!0}])}),n("div",{staticClass:"signature-container"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"signature",attrs:{cols:"21",rows:"4",maxlength:"80",placeholder:"还没有个性签名"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",{staticClass:"options"},[n("div",{staticClass:"option-btn",class:{active:t.isSynchronize},on:{click:t.onSynchronize}},[t._v("#同步到说说")]),n("div",{staticClass:"count"},[t._v(t._s(t.computedCount)+"/80")])])])],1)},s=[],a=(n("96cf"),n("1da1")),c=n("7aff"),o={data:function(){return{title:"个性签名",signature:"",content:"",isSynchronize:!1}},created:function(){var t=this.$store.state.user;this.signature=t.desc,this.content=this.signature},components:{NavHead:c["a"]},computed:{computedCount:function(){return this.content.length}},methods:{back:function(){var t=this;this.signature!==this.content?this.$createDialog({type:"confirm",title:"温馨提示",content:"你还未保存本次编辑, 是否保存?",confirmBtn:{text:"保存"},cancelBtn:{text:"不保存"},onConfirm:this.updateSignature,onCancel:function(){t.$router.go(-1)}}).show():this.$router.go(-1)},publish:function(){this.content?this.updateSignature():this.$createDialog({type:"confirm",title:"温馨提示",content:"你当前已经清除了个性签名，确认是否要清除?",confirmBtn:{text:"确认清除"},cancelBtn:{text:"继续编辑"},onConfirm:this.updateSignature}).show()},updateSignature:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("updateUserInfo",{data:{desc:t.content}});case 2:if(n=e.sent,!t.isSynchronize){e.next=8;break}return e.next=6,t.$store.dispatch("publishPost",{content:t.content});case 6:i=e.sent,i.code;case 8:200===n.code?t.$createToast({time:1e3,txt:"更新成功"}).show():t.$createToast({time:1e3,txt:"更新失败"}).show(),t.$router.push({name:"Edit",params:{update:!0}});case 10:case"end":return e.stop()}}),e)})))()},onSynchronize:function(){this.isSynchronize=!this.isSynchronize}}},r=o,u=(n("5979"),n("2877")),l=Object(u["a"])(r,i,s,!1,null,"ed0e413a",null);e["default"]=l.exports},5979:function(t,e,n){"use strict";var i=n("9843"),s=n.n(i);s.a},"7aff":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"head-wrapper"},[n("div",{staticClass:"head-left",on:{click:t.leftClick}},[t._t("left")],2),n("div",{staticClass:"title"},[t._t("default",[t._v(t._s(t.title))])],2),n("div",{staticClass:"head-right",on:{click:t.rightClick}},[t._t("right")],2)])},s=[],a={props:{title:{type:String,default:""}},methods:{leftClick:function(){this.$emit("leftClick")},rightClick:function(){this.$emit("rightClick")}}},c=a,o=(n("b019"),n("2877")),r=Object(o["a"])(c,i,s,!1,null,"595ca198",null);e["a"]=r.exports},9843:function(t,e,n){},b019:function(t,e,n){"use strict";var i=n("b8d1"),s=n.n(i);s.a},b8d1:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4f5549a8.d30abaa3.js.map